<!DOCTYPE html>
<html>

<head>
    <title>Image Metadata Viewer</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />

    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <link rel="stylesheet" type="text/css" href="css/sideNavBar.css" />
    <link rel="stylesheet" type="text/css" href="css/topNavBar.css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body style="background-image: url(img/background.png);">
    <!-- LEFT PART -->
    <!-- Side naviagtion bar  -->
    <div class="sideNavBar">
        <!--LOGO-->
        <div id="logo" align="center">
            <img id="logo" src="img/logo_v3.png" />
        </div>

        <!-- Buttons section -->
        <div class="container buttonsSideBar" align="center">
            <!--UPLOAD BUTTON-->
            <label class="btn btn-primary btn-responsive uploadButton" for="photos" align="center">Upload JPEG
                photo</label>
            <input type="file" id="photos" multiple="multiple" id="file-input" onchange="readURL(this);"
                accept="image/jpeg" display="none" />

            <div>
                <h5 style="font-size: 0.8vw">Upload a local file (only JPEG) to read Exif data.</h5>
            </div>

            <!-- Filter section -->
            <div>
                <h4 align="left" style="font-size: 1.2vw">Filter by: </h4>
            </div>
            <div class="row button-row sideGroup">
                <div class="col-xs button-container sideGroup">
                    <div class="btn-group sideGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> One - 1 </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                        value="option1">
                                    <label class="form-check-label" for="inlineCheckbox1">First</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                        value="option2">
                                    <label class="form-check-label" for="inlineCheckbox2">Second</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3"
                                        value="option3">
                                    <label class="form-check-label" for="inlineCheckbox3">Third</label>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row button-row sideGroup">
                <div class="col-xs button-container sideGroup">
                    <div class="btn-group sideGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Two - 2 </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                        value="option1">
                                    <label class="form-check-label" for="inlineCheckbox1">First</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                        value="option2">
                                    <label class="form-check-label" for="inlineCheckbox2">Second</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3"
                                        value="option3">
                                    <label class="form-check-label" for="inlineCheckbox3">Third</label>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row button-row sideGroup">
                <div class="col-xs button-container sideGroup">
                    <div class="btn-group sideGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Three - 3 </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                        value="option1">
                                    <label class="form-check-label" for="inlineCheckbox1">First</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                        value="option2">
                                    <label class="form-check-label" for="inlineCheckbox2">Second</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3"
                                        value="option3">
                                    <label class="form-check-label" for="inlineCheckbox3">Third</label>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row button-row sideGroup">
                <div class="col-xs button-container sideGroup">
                    <div class="btn-group sideGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Four - 4 </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                        value="option1">
                                    <label class="form-check-label" for="inlineCheckbox1">First</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                        value="option2">
                                    <label class="form-check-label" for="inlineCheckbox2">Second</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3"
                                        value="option3">
                                    <label class="form-check-label" for="inlineCheckbox3">Third</label>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row button-row sideGroup">
                <div class="col-xs button-container sideGroup">
                    <div class="btn-group sideGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Five - 5 </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                        value="option1">
                                    <label class="form-check-label" for="inlineCheckbox1">First</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                        value="option2">
                                    <label class="form-check-label" for="inlineCheckbox2">Second</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3"
                                        value="option3">
                                    <label class="form-check-label" for="inlineCheckbox3">Third</label>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row button-row sideGroup">
                <div class="col-xs button-container sideGroup">
                    <div class="btn-group sideGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Six - 6 </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                        value="option1">
                                    <label class="form-check-label" for="inlineCheckbox1">First</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                        value="option2">
                                    <label class="form-check-label" for="inlineCheckbox2">Second</label>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row button-row sideGroup">
                <div class="col-xs button-container sideGroup">
                    <div class="btn-group sideGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Seven - 7 </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1"
                                        value="option1">
                                    <label class="form-check-label" for="inlineCheckbox1">First</label>
                                </div>
                            </a>
                            <a class="dropdown-item">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2"
                                        value="option2">
                                    <label class="form-check-label" for="inlineCheckbox2">Second</label>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row button-row sideGroup">
                <div class="col-xs button-container sideGroup">
                    <div class="btn-group sideGroup">
                        <button type="button" class="btn btn-primary btn-responsive filterButton"> Filter </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--RIGHT PART-->
    <!-- Top navigation bar -->
    <div class="topNavBar">
        <div class="container buttonsTopBar">
            <h4 style="font-size: 1.2vw">Sort by: </h4>
            <div class="row button-row topGroup">
                <div class="col-xs button-container topGroup">
                    <div class="btn-group topGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Name </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="sortImages('name','asc')"><span
                                    class="glyphicon glyphicon-sort-by-alphabet"></span> A - Z
                            </a>
                            <a class="dropdown-item" onclick="sortImages('name','desc')"><span
                                    class="glyphicon glyphicon-sort-by-alphabet-alt"></span> Z - A
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-xs button-container topGroup">
                    <div class="btn-group topGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Original date </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="sortImages('date','asc')">Oldest to Newest</a>
                            <a class="dropdown-item" onclick="sortImages('date','desc')">Newest to Oldest</a>
                        </div>
                    </div>
                </div>
                <div class="col-xs button-container topGroup">
                    <div class="btn-group topGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Modification date </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="sortImages('modDate','asc')">Oldest to Newest</a>
                            <a class="dropdown-item" onclick="sortImages('modDate','desc')">Newest to Oldest</a>
                        </div>
                    </div>
                </div>
                <div class="col-xs button-container topGroup">
                    <div class="btn-group topGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Camera model </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="sortImages('camera','asc')"><span
                                    class="glyphicon glyphicon-sort-by-alphabet"></span> A - Z</a>
                            <a class="dropdown-item" onclick="sortImages('camera','desc')"><span
                                    class="glyphicon glyphicon-sort-by-alphabet-alt"></span> Z - A</a>
                        </div>
                    </div>
                </div>
                <div class="col-xs button-container topGroup">
                    <div class="btn-group topGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> ISO </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="sortImages('iso','asc')"> Low digital noise </a>
                            <a class="dropdown-item" onclick="sortImages('iso','desc')"> High digital noise </a>
                        </div>
                    </div>
                </div>
                <div class="col-xs button-container topGroup">
                    <div class="btn-group topGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Focal Ratio </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="sortImages('focalRatio','asc')"> Narrow depth of field
                            </a>
                            <a class="dropdown-item" onclick="sortImages('focalRatio','desc')"> Large depth of field
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-xs button-container topGroup">
                    <div class="btn-group topGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Exposure time </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="sortImages('shutter','asc')"> "Frozen" motion </a>
                            <a class="dropdown-item" onclick="sortImages('shutter','desc')"> Motion blur </a>
                        </div>
                    </div>
                </div>
                <div class="col-xs button-container topGroup">
                    <div class="btn-group topGroup">
                        <button type="button" class="btn btn-primary dropdown-toggle btn-responsive"
                            data-toggle="dropdown"> Focal length </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="sortImages('focalLength','desc')"> Narrow angle of view
                            </a>
                            <a class="dropdown-item" onclick="sortImages('focalLength','asc')"> Wide angle of view </a>
                        </div>
                    </div>
                </div>
                <div class="col-xs button-container topGroup">
                    <div class="btn-group topGroup">
                        <button type="button" class="btn btn-primary btn-responsive"
                            onclick="sortImages('defaultSort','desc')"> Default sort </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!---UPLOADING ZONE-->
    <div class="container imgContainer">
        <img id="imgbground" src="img/efish.png">
        <div class="images" id="images"></div>
    </div>

    <!-- Zoom photo -->
    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01" />
        <div id="caption"></div>
    </div>

    <!-- Modal Detail-->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Close
                    </button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="piexif.js"></script>
    <script>
        var arrImages = [];
        /* global variable storing exif data of every image */
        var arrEXIF = [];
        var imgID = 0;
        function readURL(input) {
            for (let i = 0; i < input.files.length; i++) {
                var reader = new FileReader();
                reader.onload = function (event) {
                    arrImages.push(input.files[i]);
                    var exifObj = piexif.load(event.target.result);
                    arrEXIF.push(exifObj);

                    /* EXAMPLE - wartości można zobaczyc w konsoli Fn + F12*/
                    // console.log(exifObj["0th"]["306"]) // tak się czyta na przykład datę wykonania
                    // console.log(arrEXIF[0]["0th"]["306"]) // a tak ze zmiennej globalnej
                    // console.log(piexif.TAGS["0th"]["306"]["name"])
                    // console.log(exifObj) // tutaj można podejrzeć jakie są numerki
                    // for (var ifd in exifObj) { // Loop through the properties of an object
                    //     if (ifd == "thumbnail") {
                    //         continue; // ommit "thumbnail"
                    //     }
                    //     console.log("-" + ifd);
                    //     for (var tag in exifObj[ifd]) {
                    //         // a tu można podejrzeć co oznaczają dane numerki - jakie mają nazwy, np. DateTime to 306
                    //         console.log("  " + piexif.TAGS[ifd][tag]["name"] + ":" + exifObj[ifd][tag] + " IFD: " + ifd + " TAG: " + tag);
                    //     }
                    // }

                    var newDiv = document.createElement("div");
                    newDiv.className = "dropdown";

                    var img = document.createElement("img"); // create new image
                    img.src = event.target.result; // source = uploaded file
                    imgID++;
                    img.setAttribute("id", "photo_" + imgID);
                    img.addEventListener("click", function () {
                        displayModal(img.id);
                    });
                    newDiv.appendChild(img);

                    var sortData = document.createElement("div");
                    sortData.className = "sortData";
                    sortData.textContent = "";
                    sortData.style.textAlign = "center";
                    sortData.setAttribute("id", imgID);
                    newDiv.appendChild(sortData);

                    // rotation button 
                    var rButton = document.createElement("button");
                    rButton.className = "rButton";
                    rButton.innerHTML = " <span class='glyphicon glyphicon-repeat'></span> ";
                    rButton.setAttribute("id", imgID)
                    rButton.addEventListener("click", function () {
                        rotateImg(img.id);
                    });
                    newDiv.appendChild(rButton);

                    var xButton = document.createElement("button");
                    xButton.className = "xButton";
                    xButton.innerHTML = " <span class='glyphicon glyphicon-remove'></span>";
                    xButton.setAttribute("id", imgID)
                    xButton.addEventListener("click", function () {
                        deleteImg(img.id, xButton.id);
                    });
                    newDiv.appendChild(xButton);

                    var newList = document.createElement("ul"); // dropdown list
                    newList.className = "dropdown-content";

                    var button1 = document.createElement("li");
                    var a1 = document.createElement("a");
                    a1.type = "button";
                    a1.textContent = "View Photo";
                    a1.setAttribute("id", imgID);
                    a1.addEventListener("click", function () {
                        displayModal(img.id);
                    });
                    button1.appendChild(a1);
                    newList.appendChild(button1);

                    var button2 = document.createElement("li");
                    var a2 = document.createElement("a");
                    a2.type = "button";
                    a2.textContent = "Rename?";
                    a2.setAttribute("id", imgID);
                    button2.appendChild(a2);
                    newList.appendChild(button2);

                    var button3 = document.createElement("li");
                    var a3 = document.createElement("a");
                    a3.type = "button";
                    a3.textContent = "View/Edit Details?";
                    a3.setAttribute("id", imgID);
                    a3.setAttribute("data-toggle", "modal");
                    a3.setAttribute("data-target", "#exampleModalCenter");
                    button3.appendChild(a3);
                    newList.appendChild(button3);

                    //data-toggle="modal" data-target="#exampleModalCenter"

                    var button4 = document.createElement("li");
                    var a4 = document.createElement("a");
                    a4.type = "button";
                    a4.textContent = "Download";
                    a4.setAttribute("id", imgID);
                    button4.appendChild(a4);
                    newList.appendChild(button4);

                    newDiv.appendChild(newList);
                    document.getElementById("images").prepend(newDiv); // prepend - insert newDiv to the beginning of "images"
                };
                reader.readAsDataURL(input.files[i]);
            }
        }
    </script>
    <script>
        function displayModal(photoID) {
            var modal = document.getElementById("myModal");
            var modalImg = document.getElementById("img01");

            // Get the image and insert it inside the modal
            var img = document.getElementById(photoID);

            modal.style.display = "block";
            modalImg.src = img.src;

            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];

            // When the user clicks on <span> (x), close the modal
            span.onclick = function () {
                modal.style.display = "none";
            };
        }
    </script>
    <script>
        function deleteImg(photoID, numID) {
            var img = document.getElementById(photoID);

            //Deleting from node
            let node = img.parentNode.parentNode;
            node.removeChild(img.parentNode);
        };


        function rotateImg(photoID) {
            var img = document.getElementById(photoID);

            if (img.style.transform == "") {
                img.style.transform = 'rotate(90deg)';
                img.style.boxShadow = "10px -10px 5px dimgrey";
            }
            else if (img.style.transform == 'rotate(90deg)') {
                img.style.transform = 'rotate(180deg)';
                img.style.boxShadow = "-10px -10px 5px dimgrey";
            }
            else if (img.style.transform == 'rotate(180deg)') {
                img.style.transform = 'rotate(270deg)';
                img.style.boxShadow = "-10px 10px 5px dimgrey";
            }
            else if (img.style.transform == 'rotate(270deg)') {
                img.style.transform = 'rotate(0deg)';
                img.style.boxShadow = "10px 10px 5px dimgrey";
            }
            else if (img.style.transform == 'rotate(0deg)') {
                img.style.transform = 'rotate(90deg)';
                img.style.boxShadow = "10px -10px 5px dimgrey";
            }
        };

    </script>
    <script>
        function sortImages(sortBy, order) {
            var parentDiv = document.getElementById("images");
            /* get images */
            var parentDivImages = parentDiv.getElementsByTagName("img");
            /* copy images' ids and theirs names into a list */
            var parentDivImagesSorted = [];
            /* get images data areas array */
            var imageSortData = parentDiv.getElementsByClassName("sortData");
            for (let i = 0; i < parentDivImages.length; i++) {
                /* get image's id (format: photo_+nr */
                let ID = parentDivImages[i].id;
                try {
                    switch (sortBy) {
                        case "name":                         /* get number from id */
                            var obj = { "id": ID, "name": arrImages[ID.substring(6) - 1].name };
                            imageSortData[i].textContent = "Name: " + arrImages[ID.substring(6) - 1].name;
                            console.log(imageSortData[i]);
                            break;
                        case "date":
                            var obj = { "id": ID, "date": arrEXIF[ID.substring(6) - 1]["Exif"]["36867"] };
                            imageSortData[i].textContent = "Original date: " + arrEXIF[ID.substring(6) - 1]["Exif"]["36867"];
                            break;
                        case "modDate":
                            var obj = { "id": ID, "modDate": arrEXIF[ID.substring(6) - 1]["0th"]["306"] };
                            imageSortData[i].textContent = "Modification date: " + arrEXIF[ID.substring(6) - 1]["0th"]["306"];
                            break;
                        case "camera":
                            var obj = { "id": ID, "camera": arrEXIF[ID.substring(6) - 1]["0th"]["271"] + " " + arrEXIF[ID.substring(6) - 1]["0th"]["272"] }; //concat of camera manufacturer and model
                            imageSortData[i].textContent = "Camera: " + arrEXIF[ID.substring(6) - 1]["0th"]["271"] + " " + arrEXIF[ID.substring(6) - 1]["0th"]["272"];
                            break;
                        //Exposure triangle
                        case "iso":
                            var obj = { "id": ID, "iso": arrEXIF[ID.substring(6) - 1]["Exif"]["34855"] };
                            imageSortData[i].textContent = "ISO: " + arrEXIF[ID.substring(6) - 1]["Exif"]["34855"];
                            break;
                        case "focalRatio":
                            imageSortData[i].textContent = "Focal ratio: ";
                            var obj = { "id": ID, "focalRatio": arrEXIF[ID.substring(6) - 1]["Exif"]["33437"][0] / arrEXIF[ID.substring(6) - 1]["Exif"]["33437"][1] };
                            imageSortData[i].textContent += arrEXIF[ID.substring(6) - 1]["Exif"]["33437"][0] / arrEXIF[ID.substring(6) - 1]["Exif"]["33437"][1];
                            break;
                        case "shutter":
                            imageSortData[i].textContent = "Exposure time: ";
                            var obj = { "id": ID, "shutter": arrEXIF[ID.substring(6) - 1]["Exif"]["33434"][0] / arrEXIF[ID.substring(6) - 1]["Exif"]["33434"][1] }; //exposure time in seconds
                            imageSortData[i].textContent += arrEXIF[ID.substring(6) - 1]["Exif"]["33434"][0] + "/" + arrEXIF[ID.substring(6) - 1]["Exif"]["33434"][1] + "sec";
                            break;
                        //end
                        case "focalLength":
                            imageSortData[i].textContent = "Focal length: ";
                            var obj = { "id": ID, "focalLength": arrEXIF[ID.substring(6) - 1]["Exif"]["37386"][0] / arrEXIF[ID.substring(6) - 1]["Exif"]["37386"][1] };
                            imageSortData[i].textContent += arrEXIF[ID.substring(6) - 1]["Exif"]["37386"][0] / arrEXIF[ID.substring(6) - 1]["Exif"]["37386"][1];
                            break;
                        case "defaultSort":
                            var obj = { "id": ID, "defaultSort": ID };
                            imageSortData[i].textContent = "";
                            break;
                        default:
                        /* ? */
                    }
                } catch (error) {
                    var obj = { "id": ID, sortBy: "undefined" };
                    imageSortData[i].textContent += "undefined";
                }
                parentDivImagesSorted.push(obj);
            }
            console.log(arrImages)
            console.log(arrEXIF)
            console.log(parentDivImagesSorted)
            /* sort with a desired order */
            parentDivImagesSorted.sort(compareValues(sortBy, order));
            for (let img in parentDivImagesSorted) {
                let imgDiv = document.getElementById(parentDivImagesSorted[img].id).parentNode;
                /* change order of div elements */
                parentDiv.appendChild(imgDiv);
            }
        }

        function compareValues(key, order = 'asc') { //'asc' by default
            return function innerSort(a, b) {
                const varA = (typeof a[key] === 'string') // for 'string' change to upper case (comparison is not case sensitive)
                    ? a[key].toUpperCase() : a[key];
                const varB = (typeof b[key] === 'string')
                    ? b[key].toUpperCase() : b[key];

                let comparison = 0;
                if (varA > varB) { // e.g. for strings S>P
                    comparison = 1;
                } else if (varA < varB) {
                    comparison = -1;
                 } else {  //Comparison of defined element with undefined one
                    if (typeof varA === "undefined") {
                        return 1;
                    } else if (typeof varB === "undefined") {
                        return -1;
                    }
                }
                return (
                    (order === 'desc') ? (comparison * -1) : comparison
                );
            };
        }
    </script>
</body>

</html>